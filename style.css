@layer reset, base, theme, components, utilities;

@layer theme {
    :root {
        /* Colors: OKLCH Standard 2025 */
        /* Deep Navy Background */
        --bg-color: oklch(22% 0.06 265);
        /* Lighter Navy */
        --bg-light: oklch(28% 0.08 265);
        /* Card/Surface */
        --bg-lighter: oklch(35% 0.1 265);

        /* Typography Colors */
        --text-primary: oklch(92% 0.02 260);
        /* Brighter for contrast */
        --text-secondary: oklch(70% 0.04 260);

        /* Accent: Teal/Cyan Neon */
        --accent: oklch(85% 0.16 170);
        --accent-dim: oklch(85% 0.16 170 / 0.1);
        --accent-glow: oklch(85% 0.16 170 / 0.4);

        --scroll-thumb: oklch(45% 0.07 260);

        --nav-height: 100px;

        /* Typography */
        --font-main: 'Inter', sans-serif;
        --font-mono: 'SF Mono', 'Fira Code', 'Fira Mono', 'Roboto Mono', monospace;

        --transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);

        /* Modern Glassmorphism Variables */
        --glass-bg: oklch(22% 0.06 265 / 0.65);
        --glass-border: 1px solid oklch(88% 0.03 260 / 0.08);
        --glass-blur: blur(16px);
        --glass-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);

        /* Gradients */
        --gradient-text: linear-gradient(120deg, var(--accent) 0%, oklch(90% 0.1 200) 100%);
        --gradient-bg:
            radial-gradient(circle at 10% 20%, oklch(25% 0.1 265 / 0.2), transparent 40%),
            radial-gradient(circle at 90% 80%, oklch(25% 0.1 180 / 0.2), transparent 40%);

        /* Spacing System */
        --space-xs: 0.5rem;
        --space-sm: 1rem;
        --space-md: 2rem;
        --space-lg: 4rem;
        --space-xl: 8rem;
    }
}

@layer reset {
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    html {
        scroll-behavior: smooth;
        -webkit-text-size-adjust: 100%;
    }
}

@layer base {
    body {
        background-color: var(--bg-color);
        color: var(--text-primary);
        font-family: var(--font-main);
        line-height: 1.6;
        overflow-y: hidden;
        /* App-like feel, controlled by sections */
        height: 100dvh;
        width: 100%;
        background-image: var(--gradient-bg);
        background-attachment: fixed;
    }

    /* Selection Color */
    ::selection {
        background: var(--accent-dim);
        color: var(--accent);
    }

    /* Custom Scrollbar */
    ::-webkit-scrollbar {
        width: 10px;
    }

    ::-webkit-scrollbar-track {
        background: var(--bg-color);
    }

    ::-webkit-scrollbar-thumb {
        background-color: var(--scroll-thumb);
        border: 2px solid var(--bg-color);
        border-radius: 99px;
    }

    a {
        color: inherit;
        text-decoration: none;
    }

    ul {
        list-style: none;
    }
}

@layer components {

    /* Custom Cursor */
    #cursor {
        width: 20px;
        height: 20px;
        border: 1px solid var(--accent);
        background: transparent;
        border-radius: 50%;
        position: fixed;
        pointer-events: none;
        z-index: 9999;
        transition: transform 0.15s ease-out, background-color 0.2s;
        /* mix-blend-mode: difference; Removed for better visibility on dark bg */
    }

    /* Navbar */
    .navbar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: fixed;
        top: 0;
        inset-inline: 0;
        /* Left/Right 0 */
        height: var(--nav-height);
        padding-inline: 50px;
        background-color: var(--glass-bg);
        backdrop-filter: var(--glass-blur);
        -webkit-backdrop-filter: var(--glass-blur);
        /* Safari */
        border-bottom: var(--glass-border);
        z-index: 1000;
        transition: var(--transition);

        & .logo {
            display: flex;
            align-items: center;
            cursor: pointer;
            z-index: 1002;

            & .nav-logo-img {
                height: 75px;
                width: auto;
                object-fit: contain;
                transition: transform 0.3s ease;

                &:hover {
                    transform: scale(1.1);
                }
            }
        }

        & .nav-links {
            display: flex;
            gap: 40px;
            align-items: center;

            & .nav-link {
                color: var(--text-primary);
                font-family: var(--font-mono);
                font-size: 0.875rem;
                /* 14px */
                position: relative;

                &::after {
                    content: '';
                    position: absolute;
                    width: 0;
                    height: 1px;
                    bottom: -5px;
                    left: 0;
                    background-color: var(--accent);
                    transition: width 0.3s ease;
                }

                &:hover {
                    color: var(--accent);

                    &::after {
                        width: 100%;
                    }
                }
            }
        }

        & .hamburger {
            display: none;
            /* Hidden on desktop */
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: transparent;
            border: none;
            cursor: pointer;
            z-index: 2000;
            gap: 6px;
            padding: 10px;

            & span {
                width: 30px;
                height: 2px;
                background-color: var(--accent);
                border-radius: 2px;
                transition: all 0.3s ease;
            }
        }
    }

    /* Reusable UI Elements */
    .cta-btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        color: var(--accent);
        background: transparent;
        border: 1px solid var(--accent);
        border-radius: 8px;
        padding: 1rem 1.75rem;
        font-family: var(--font-mono);
        font-size: 0.9rem;
        cursor: pointer;
        transition: var(--transition);
        margin-block-start: var(--space-md);

        &:hover {
            background: var(--accent-dim);
            box-shadow: 0 0 15px var(--accent-glow);
            transform: translateY(-2px);
        }

        &.big-btn {
            padding: 1.25rem 2.5rem;
            font-size: 1rem;
        }
    }

    .resume-btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        color: var(--accent);
        background: transparent;
        border: 1px solid var(--accent);
        border-radius: 8px;
        padding: 0.75rem 1.25rem;
        font-family: var(--font-mono);
        font-size: 0.85rem;
        cursor: pointer;
        transition: var(--transition);
        margin-inline-end: 1rem;
        margin-block-start: 20px;

        &:hover {
            background: var(--accent-dim);
        }
    }

    /* Main Container & Sections */
    main {
        position: fixed;
        inset: 0;
        width: 100%;
        height: 100dvh;
        z-index: 10;
        container-type: inline-size;
    }

    section {
        position: absolute;
        inset: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        visibility: hidden;
        display: flex;
        flex-direction: column;
        justify-content: center;
        padding-block: 120px 60px;
        padding-inline: 10%;
        /* Responsive padding */
        overflow-y: auto;
        /* Allow scrolling within section if needed */

        /* Z-Index defaults */
        &#hero {
            opacity: 1;
            visibility: visible;
            z-index: 1;
            align-items: flex-start;
        }

        &#about {
            z-index: 2;
        }

        &#skills {
            z-index: 3;
        }

        &#projects {
            z-index: 4;
        }

        &#contact {
            z-index: 5;
        }
    }

    .section-title {
        display: flex;
        align-items: center;
        font-size: clamp(1.5rem, 4vw, 2rem);
        color: var(--text-primary);
        font-weight: 600;
        margin-block-end: var(--space-lg);
        white-space: nowrap;

        &::after {
            content: "";
            display: block;
            width: 100%;
            max-width: 300px;
            height: 1px;
            background-color: var(--bg-lighter);
            margin-inline-start: 20px;
            opacity: 0.5;
        }
    }

    /* --- HERO SECTION --- */
    .hero-grid-container {
        display: grid;
        grid-template-columns: 1.2fr 0.8fr;
        align-items: center;
        gap: var(--space-lg);
        width: 100%;
        max-width: 1400px;
        margin-inline: auto;

        & .hero-content {
            & .hi {
                color: var(--accent);
                font-family: var(--font-mono);
                font-size: 1rem;
                margin-block-end: var(--space-sm);
            }

            & .name {
                font-size: clamp(3rem, 7vw, 5.5rem);
                font-weight: 700;
                line-height: 1.1;
                margin-block-end: 10px;
                background: var(--gradient-text);
                -webkit-background-clip: text;
                background-clip: text;
                -webkit-text-fill-color: transparent;
                filter: drop-shadow(0 0 2px rgba(100, 255, 218, 0.3));
            }

            & .tagline {
                color: var(--text-secondary);
                font-size: clamp(2rem, 5vw, 4rem);
                font-weight: 600;
                line-height: 1.1;
                margin-block-end: var(--space-md);
            }

            & .bio-short {
                color: var(--text-secondary);
                max-width: 540px;
                font-size: 1.125rem;
                line-height: 1.7;
                margin-block-end: var(--space-lg);
            }
        }

        & .hero-image-container {
            display: flex;
            justify-content: center;
            position: relative;

            & .hero-img {
                width: 100%;
                max-width: 400px;
                aspect-ratio: 1/1;
                object-fit: cover;
                border-radius: 20px;
                filter: grayscale(100%) contrast(1.1) brightness(0.9);
                transition: var(--transition);
                box-shadow: 20px 20px 0 0 var(--accent-dim);

                &:hover {
                    filter: none;
                    transform: translate(-5px, -5px);
                    box-shadow: 25px 25px 0 0 var(--accent-dim);
                }
            }
        }
    }

    /* --- ABOUT SECTION --- */
    .about-content {
        display: grid;
        grid-template-columns: 3fr 2fr;
        gap: var(--space-lg);
        align-items: start;
        max-width: 1000px;
        margin-inline: auto;

        & .about-text {
            font-size: 1.1rem;
            color: var(--text-secondary);

            & p {
                margin-block-end: 1rem;
            }
        }

        & .about-img .img-container {
            position: relative;
            width: fit-content;
            margin-inline: auto;

            & .about-profile-img {
                width: 300px;
                height: 300px;
                object-fit: cover;
                border-radius: 12px;
                filter: grayscale(100%);
                transition: var(--transition);
                z-index: 1;
                position: relative;

                &:hover {
                    filter: none;
                }
            }

            &::after {
                content: '';
                position: absolute;
                inset: 0;
                border: 2px solid var(--accent);
                border-radius: 12px;
                z-index: 0;
                transform: translate(15px, 15px);
                transition: var(--transition);
            }

            &:hover::after {
                transform: translate(10px, 10px);
            }
        }
    }

    /* --- SKILLS SECTION --- */
    .skills-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
        gap: 20px;
        max-width: 1000px;
        margin-inline: auto;
        padding: 0;

        & .skill-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: var(--bg-light);
            padding: 2rem;
            border-radius: 12px;
            transition: var(--transition);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border: 1px solid transparent;

            & i {
                font-size: 2.5rem;
                color: var(--accent);
                margin-block-end: 1rem;
                transition: transform 0.3s;
            }

            &:hover {
                transform: translateY(-5px);
                border-color: var(--accent);
                box-shadow: 0 10px 20px -10px var(--accent-glow);

                & i {
                    transform: scale(1.1);
                }
            }
        }
    }

    /* --- PROJECTS SECTION --- */
    .projects-container {
        display: flex;
        overflow-x: auto;
        gap: 2rem;
        padding-block-end: 3rem;
        scroll-behavior: smooth;
        scroll-snap-type: x mandatory;
        -webkit-overflow-scrolling: touch;

        /* Hide scrollbar by default, show on hover maybe? No, keep styled */
        &::-webkit-scrollbar {
            height: 6px;
        }

        &::-webkit-scrollbar-track {
            background: var(--bg-light);
            border-radius: 4px;
        }

        &::-webkit-scrollbar-thumb {
            background: var(--accent);
            border-radius: 4px;
        }

        & .project-card {
            flex: 0 0 max(350px, 30vw);
            min-height: 450px;
            scroll-snap-align: center;
            background: var(--bg-light);
            border-radius: 16px;
            padding: 2rem;
            position: relative;
            transition: var(--transition);
            border: 1px solid transparent;
            display: flex;
            flex-direction: column;

            &:hover {
                border-color: var(--accent);
                transform: translateY(-10px);
                background: linear-gradient(145deg, var(--bg-light) 0%, oklch(30% 0.1 265) 100%);
            }

            & .project-overline {
                color: var(--accent);
                font-family: var(--font-mono);
                font-size: 0.8rem;
                margin-block-end: 0.5rem;
            }

            & .project-title {
                font-size: 1.5rem;
                color: var(--text-primary);
                margin-block-end: 1rem;
            }

            & .project-desc {
                color: var(--text-secondary);
                font-size: 0.95rem;
                line-height: 1.6;
                margin-block-end: 1.5rem;
                flex-grow: 1;
            }

            & .project-tech {
                display: flex;
                flex-wrap: wrap;
                gap: 10px;
                font-family: var(--font-mono);
                font-size: 0.8rem;
                color: var(--text-secondary);
                margin-block-end: 1.5rem;

                & li {
                    background: var(--bg-color);
                    padding: 4px 10px;
                    border-radius: 50px;
                }
            }

            & .project-links a {
                color: var(--text-primary);
                font-size: 1.25rem;
                transition: color 0.2s;

                &:hover {
                    color: var(--accent);
                }
            }
        }
    }

    /* --- CONTACT SECTION --- */
    .contact-content {
        text-align: center;
        max-width: 600px;
        margin-inline: auto;

        & .contact-head {
            font-size: clamp(2.5rem, 5vw, 4rem);
            color: var(--text-primary);
            margin-block-end: 1.5rem;
        }

        & .contact-text {
            color: var(--text-secondary);
            font-size: 1.2rem;
            margin-block-end: 3rem;
        }

        & .social-links-contact {
            margin-block-start: 3rem;
            display: flex;
            justify-content: center;
            gap: 2rem;

            & li a {
                font-size: 1.5rem;
                color: var(--text-secondary);
                transition: var(--transition);

                &:hover {
                    color: var(--accent);
                    transform: translateY(-3px);
                }
            }
        }
    }

    /* Footer */
    footer {
        position: fixed;
        bottom: 1rem;
        width: 100%;
        text-align: center;
        color: var(--text-secondary);
        font-family: var(--font-mono);
        font-size: 0.8rem;
        pointer-events: none;
        z-index: 50;

        & p {
            font-size: 0.9rem;
        }
    }
}

@layer utilities {
    /* Responsive Improvements via Container/Media Queries */

    @media (max-width: 900px) {



        @media (max-width: 900px) {

            /* SCORCHED EARTH: Force native scrolling */
            html,
            body {
                overflow-y: scroll !important;
                /* Force scrollbar */
                height: auto !important;
                min-height: 100% !important;
                position: static !important;
                touch-action: pan-x pan-y !important;
                /* Allow X and Y */
                -webkit-overflow-scrolling: touch !important;
            }

            /* Horizontal Projects Slider */
            .projects-container {
                display: flex !important;
                flex-direction: row !important;
                overflow-x: auto !important;
                overflow-y: hidden !important;
                width: 100% !important;
                gap: 20px;
                padding-bottom: 20px;
                scroll-snap-type: x mandatory;
            }

            .project-card {
                flex: 0 0 85vw !important;
                width: 85vw !important;
                scroll-snap-align: center;
                margin-right: 0 !important;
            }

            /* Ensure no container traps scroll */
            main,
            .container,
            .wrapper {
                overflow: visible !important;
                height: auto !important;
                position: static !important;
            }

            /* Force Visibility of all animated elements */
            /* Force Visibility & Flow of all animated elements */
            section {
                opacity: 1 !important;
                visibility: visible !important;
                transform: none !important;
                pointer-events: auto !important;
                position: relative !important;
                /* CRITICAL: Prevent overlap */
                top: auto !important;
                left: auto !important;
                height: auto !important;
                min-height: 100dvh;
                display: flex;
                flex-direction: column;
            }

            .hero-content>*,
            .hero-img,
            .nav-link,
            .logo {
                opacity: 1 !important;
                visibility: visible !important;
                transform: none !important;
                pointer-events: auto !important;
            }

            .navbar {
                padding-inline: 20px;
                height: 70px;
                /* Reduced specific mobile height */

                & .hamburger {
                    display: flex;
                }

                & .nav-links {
                    position: fixed;
                    top: 0;
                    right: 0;
                    width: 75vw;
                    height: 100dvh;
                    background: var(--bg-light);
                    /* Ensure valid OKLCH color or var */
                    background-color: var(--bg-light);
                    /* Fallback/Precision */
                    flex-direction: column;
                    justify-content: center;
                    transform: translateX(100%);
                    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                    box-shadow: -10px 0 30px rgba(0, 0, 0, 0.5);
                    border-left: 1px solid var(--accent-dim);
                    padding: 2rem;

                    &.active {
                        transform: translateX(0);
                    }
                }

                /* Hamburger animation logic handled by JS class toggle */
                & .hamburger.toggle span:nth-child(1) {
                    transform: rotate(45deg) translate(5px, 6px);
                }

                & .hamburger.toggle span:nth-child(2) {
                    opacity: 0;
                }

                & .hamburger.toggle span:nth-child(3) {
                    transform: rotate(-45deg) translate(5px, -6px);
                }

                /* Logo adjustment for mobile nav height */
                & .logo .nav-logo-img {
                    height: 50px;
                }
            }

            /* Mobile GSAP Scrolling - Keep Layout Adjustments */

            section {
                /* Keep vertical spacing adjustments for mobile content */
                padding-block: 80px 40px;
                padding-inline: 20px;
                /* Flex layout helps contrast with absolute positioning of GSAP */
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
            }

            /* Hero Adjustments */
            .hero-grid-container {
                grid-template-columns: 1fr;
                text-align: center;
                gap: 1.5rem;

                & .hero-content {
                    order: 2;

                    & .name {
                        font-size: clamp(2.5rem, 10vw, 3.5rem);
                        /* Smaller mobile font */
                        line-height: 1.1;
                    }

                    & .tagline {
                        font-size: clamp(1.5rem, 6vw, 2rem);
                        margin-block-end: 1rem;
                    }

                    & .bio-short {
                        font-size: 1rem;
                        line-height: 1.5;
                    }
                }

                & .hero-image-container {
                    order: 1;
                    margin-block-end: 0;

                    & .hero-img {
                        width: 200px;
                        /* Smaller image */
                        height: 200px;
                    }
                }
            }

            /* About Section Mobile Polish */
            .about-content {
                display: flex;
                flex-direction: column;
                align-items: center;
                text-align: center;
                gap: 2rem;

                & .about-img {
                    order: 1;
                    margin-block-end: 0;

                    & .img-container {

                        /* Smaller Profile Image */
                        & .about-profile-img {
                            width: 180px;
                            height: 180px;
                        }

                        /* Adjust border offset for smaller size */
                        &::after {
                            transform: translate(10px, 10px);
                        }
                    }
                }

                & .about-text {
                    order: 2;
                    text-align: left;
                    /* Keep text readable */
                    font-size: 1rem;
                    padding-inline: 10px;

                    & .button-group {
                        display: flex;
                        justify-content: center;
                        flex-wrap: wrap;
                    }
                }
            }

            /* Skills Section Mobile Polish */
            .skills-grid {
                grid-template-columns: repeat(2, 1fr) !important;
                /* Force 2 columns */
                gap: 15px;

                & .skill-item {
                    padding: 1rem;
                    aspect-ratio: auto;
                    /* Remove square constraint if needed, or keep for consistency */
                    min-height: 120px;

                    & i {
                        font-size: 2rem;
                        /* Smaller icons */
                        margin-block-end: 0.5rem;
                    }

                    & span {
                        font-size: 0.9rem;
                    }
                }
            }

            /* Contact adjustments */
            .contact-content .contact-head {
                font-size: 2rem;
            }
        }

        /* Small Mobile */
        @media (max-width: 480px) {
            .projects-container {
                gap: 1.5rem;
                padding-inline: 1rem;
                /* Ensure start/end padding for scroll */

                & .project-card {
                    flex: 0 0 85vw;
                    min-height: auto;
                    padding: 1.5rem;
                }
            }

            .navbar .nav-links {
                width: 85vw;
            }
        }
    }